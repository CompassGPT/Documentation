<mxfile host="65bd71144e">
    <diagram id="PredictionCodeDiagram" name="AI Prediction">
        <mxGraphModel dx="1598" dy="1001" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1350" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <object label="&lt;b&gt;C4 Level 4: Code Diagram - AI Prediction Component&lt;/b&gt;&lt;br&gt;Shows code-level implementation of the prediction flow" id="title">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="40" y="20" width="800" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="Backend API (NestJS)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;Backend API (NestJS)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="backendBoundary">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" parent="1" vertex="1">
                        <mxGeometry x="40" y="100" width="640" height="950" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="AI Service (Python FastAPI)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;AI Service (Python FastAPI)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="aiServiceBoundary">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" parent="1" vertex="1">
                        <mxGeometry x="720" y="100" width="640" height="1200" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Presentation Layer&lt;/b&gt;" id="backendPresentation">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="60" y="130" width="600" height="210" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="AiController" c4Type="Class" c4Technology="TypeScript" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«class»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;AiController&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- aiService: IAiService&lt;br&gt;─────────────&lt;br&gt;+ createPrediction(&lt;br&gt;&amp;nbsp;&amp;nbsp;session: SessionData,&lt;br&gt;&amp;nbsp;&amp;nbsp;prediction: PredictionDto&lt;br&gt;): Promise&amp;lt;PredictionResponseDto&amp;gt;" id="aiController">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=11;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="80" y="160" width="250" height="150" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PredictionDto" c4Type="DTO Class" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«dto»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;PredictionDto&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ currentStudy: string&lt;br&gt;+ interests: string[]&lt;br&gt;+ wantedStudyCreditRange: [number, number]&lt;br&gt;+ locationPreference: string[]&lt;br&gt;+ learningGoals: string[]&lt;br&gt;+ levelPreference: string[]&lt;br&gt;+ preferredLanguage: string&lt;br&gt;+ preferredPeriod: string[]" id="predictionDto">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="370" y="160" width="270" height="160" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Application Layer&lt;/b&gt;" id="backendApplication">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="60" y="364" width="600" height="270" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="AiService" c4Type="Class" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«service»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;AiService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- predictionClient: IPredictionClient&lt;br&gt;- moduleService: IModuleService&lt;br&gt;- logger: LoggerService&lt;br&gt;─────────────&lt;br&gt;+ getPrediction(&lt;br&gt;&amp;nbsp;&amp;nbsp;dto: PredictionDto&lt;br&gt;): Promise&amp;lt;Result&amp;lt;PredictionWithModules&amp;gt;&amp;gt;&lt;br&gt;- transformDtoToPayload(&lt;br&gt;&amp;nbsp;&amp;nbsp;dto: PredictionDto&lt;br&gt;): PredictionPayload" id="aiService">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="80" y="394" width="250" height="190" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="IAiService" c4Type="Interface" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«interface»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;IAiService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ getPrediction(&lt;br&gt;&amp;nbsp;&amp;nbsp;dto: PredictionDto&lt;br&gt;): Promise&amp;lt;Result&amp;lt;PredictionWithModules&amp;gt;&amp;gt;" id="iAiService">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="370" y="394" width="270" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PredictionWithModules" c4Type="Type" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«type»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;PredictionWithModules&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;predictions: Array&amp;lt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;module: Module,&lt;br&gt;&amp;nbsp;&amp;nbsp;score: number&lt;br&gt;}&amp;gt;" id="predictionWithModules">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="370" y="514" width="270" height="110" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Infrastructure Layer&lt;/b&gt;" id="backendInfrastructure">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="60" y="662" width="600" height="328" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="AiHttpClient" c4Type="Class" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«http client»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;AiHttpClient&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- aiServiceUrl: string&lt;br&gt;- httpService: HttpService&lt;br&gt;- configService: ConfigService&lt;br&gt;- logger: LoggerService&lt;br&gt;─────────────&lt;br&gt;+ getPrediction(&lt;br&gt;&amp;nbsp;&amp;nbsp;payload: PredictionPayload&lt;br&gt;): Promise&amp;lt;PredictionMatch[]&amp;gt;&lt;br&gt;- handleError(error: unknown): HttpException&lt;br&gt;- extractErrorMessage(&lt;br&gt;&amp;nbsp;&amp;nbsp;responseData: unknown, status: number&lt;br&gt;): string" id="aiHttpClient">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="80" y="692" width="250" height="218" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="IPredictionClient" c4Type="Interface" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«interface»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;IPredictionClient&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ getPrediction(&lt;br&gt;&amp;nbsp;&amp;nbsp;payload: PredictionPayload&lt;br&gt;): Promise&amp;lt;PredictionMatch[]&amp;gt;" id="iPredictionClient">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="371" y="683" width="270" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="DS3UAEYtDb-in0yMJIg9-1" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="predictionPayload">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="505" y="800" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="DS3UAEYtDb-in0yMJIg9-2" value="uses" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="DS3UAEYtDb-in0yMJIg9-1">
                    <mxGeometry x="-0.04" y="-2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <object c4Name="PredictionPayload" c4Type="Interface" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«interface»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;PredictionPayload&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;current_study: string&lt;br&gt;interests: string[]&lt;br&gt;wanted_study_credit_range: [number, number]&lt;br&gt;location_preference: string[]&lt;br&gt;learning_goals: string[]&lt;br&gt;level_preference: string[]&lt;br&gt;preferred_language: string&lt;br&gt;preferred_period: string[]" id="predictionPayload">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="370" y="825" width="270" height="153" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Controller Layer (FastAPI)&lt;/b&gt;" id="aiControllerLayer">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="740" y="130" width="600" height="230" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="predict_controller.py" c4Type="Module" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«module»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;predict_controller.py&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;router: APIRouter&lt;br&gt;─────────────&lt;br&gt;@router.post(&#39;/&#39;)&lt;br&gt;def predict(&lt;br&gt;&amp;nbsp;&amp;nbsp;data: StudentInput&lt;br&gt;) -&amp;gt; dict:&lt;br&gt;&amp;nbsp;&amp;nbsp;cleaned = clean_prediction_data(data)&lt;br&gt;&amp;nbsp;&amp;nbsp;vectorized = vectorize_student_input(cleaned)&lt;br&gt;&amp;nbsp;&amp;nbsp;matches = filter_matches_top_5(&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;vectorized, data&lt;br&gt;&amp;nbsp;&amp;nbsp;)&lt;br&gt;&amp;nbsp;&amp;nbsp;return {&quot;filtered_top_5_matches&quot;: matches}" id="predictController">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="760" y="160" width="300" height="190" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Service Layer (Business Logic)&lt;/b&gt;" id="aiServiceLayer">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="740" y="370" width="600" height="680" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="StudentInput" c4Type="Pydantic Model" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«pydantic model»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;StudentInput&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;current_study: str&lt;br&gt;interests: list[str]&lt;br&gt;wanted_study_credit_range: tuple[int, int]&lt;br&gt;location_preference: list[str]&lt;br&gt;learning_goals: list[str]&lt;br&gt;level_preference: list[str]&lt;br&gt;preferred_language: str&lt;br&gt;preferred_period: list[str]&lt;br&gt;─────────────&lt;br&gt;@field_validator(&#39;wanted_study_credit_range&#39;)&lt;br&gt;@field_validator(&#39;current_study&#39;)&lt;br&gt;@field_validator(&#39;learning_goals&#39;, &#39;interests&#39;)&lt;br&gt;@field_validator(&#39;location_preference&#39;)" id="studentInput">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=8;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="1080" y="160" width="240" height="180" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="predict_service.py" c4Type="Module" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«module»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;predict_service.py&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Functions:&lt;br&gt;• clean_prediction_data(&lt;br&gt;&amp;nbsp;&amp;nbsp;data: StudentInput&lt;br&gt;) -&amp;gt; str&lt;br&gt;• vectorize_student_input(&lt;br&gt;&amp;nbsp;&amp;nbsp;input: str&lt;br&gt;) -&amp;gt; ndarray&lt;br&gt;• filter_matches_top_5(&lt;br&gt;&amp;nbsp;&amp;nbsp;vectorized_input,&lt;br&gt;&amp;nbsp;&amp;nbsp;data: StudentInput,&lt;br&gt;&amp;nbsp;&amp;nbsp;metadata_path: str&lt;br&gt;) -&amp;gt; list[dict]" id="predictService">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="760" y="400" width="280" height="220" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="Step 1: clean_prediction_data()" c4Type="Function" label="&lt;b&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;Step 1&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;clean_prediction_data()&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Joins:&lt;br&gt;• current_study&lt;br&gt;• interests[]&lt;br&gt;• learning_goals[]&lt;br&gt;&lt;br&gt;Returns: single text string" id="step1Clean">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" vertex="1" parent="1">
                        <mxGeometry x="1110" y="445" width="180" height="130" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="Step 2: vectorize_student_input()" c4Type="Function" label="&lt;b&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;Step 2&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;vectorize_student_input()&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Input: cleaned text string&lt;br&gt;&lt;br&gt;Uses: SentenceTransformer&lt;br&gt;Model: paraphrase-multilingual-&lt;br&gt;MiniLM-L12-v2&lt;br&gt;&lt;br&gt;Returns: ndarray[384]" id="step2Vectorize">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" vertex="1" parent="1">
                        <mxGeometry x="1110" y="650" width="180" height="130" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="Step 3: filter_matches_top_5()" c4Type="Function" label="&lt;b&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;Step 3&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;filter_matches_top_5()&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Input: student vector + preferences&lt;br&gt;&lt;br&gt;1. Load + filter metadata CSV&lt;br&gt;2. Get candidate module IDs&lt;br&gt;3. Load .pkl with IDs&lt;br&gt;4. Stack vectors → matrix&lt;br&gt;5. cosine_similarity()&lt;br&gt;6. Sort + return top 5" id="step3Filter">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" vertex="1" parent="1">
                        <mxGeometry x="790" y="710" width="160" height="170" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="SentenceTransformer" c4Type="External Library" label="&lt;b&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;«library»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;SentenceTransformer&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;.encode(text) -&amp;gt; vector" id="sentenceTransformer">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;fontColor=#000000;fontSize=9;align=center;verticalAlign=middle;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="1110" y="824" width="180" height="50" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="cosine_similarity" c4Type="Function (sklearn)" label="&lt;b&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;«sklearn.metrics.pairwise»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;cosine_similarity&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;(student_vec, module_matrix)" id="cosineSimilarity">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;fontColor=#000000;fontSize=9;align=center;verticalAlign=middle;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="980" y="930" width="160" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Data Layer&lt;/b&gt;" id="aiDataLayer">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="740" y="1080" width="600" height="150" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="sentence_embedded_dataframe.pkl" c4Type="File" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«pickle file»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;sentence_embedded_dataframe.pkl&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Pre-computed embeddings:&lt;br&gt;• module_id&lt;br&gt;• sentence_embedding_vector (384-dim)&lt;br&gt;Generated from module descriptions" id="embeddedDataframe">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="760" y="1110" width="250" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="cleaned_dataset_soft-NLP.csv" c4Type="File" label="&lt;b&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;«csv file»&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;b&gt;cleaned_dataset_soft-NLP.csv&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Module metadata for filtering:&lt;br&gt;• id, level, studycredit&lt;br&gt;• location, language, period" id="metadataCsv">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="1030" y="1110" width="290" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="rel1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="aiController" target="aiService" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="uses" id="rel1Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#666666;" parent="rel1" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=open;endFill=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aiController" target="predictionDto" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="receives" id="rel2Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#666666;" parent="rel2" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="5" y="-9" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=block;endFill=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aiService" target="iAiService" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="implements" id="rel3Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#7B1FA2;" parent="rel3" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="10" y="-9" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel4" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="aiService" target="aiHttpClient" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="calls" id="rel4Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#666666;" parent="rel4" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel5" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=block;endFill=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aiHttpClient" target="iPredictionClient" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="implements" id="rel5Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#7B1FA2;" parent="rel5" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="1" y="-5" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="relHttp" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#E65100;strokeWidth=3;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="aiHttpClient" target="predictController" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="700" y="500"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object label="HTTP POST &lt;br&gt;/predict" id="relHttpLabel">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#E65100;fontStyle=1" parent="relHttp" vertex="1" connectable="0">
                        <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                            <mxPoint x="10" y="-17" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel6" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="predictController" target="predictService" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="calls functions" id="rel6Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#666666;" parent="rel6" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel7" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=open;endFill=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="predictController" target="studentInput" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="validates with" id="rel7Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#666666;" parent="rel7" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="15" y="-9" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel8" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F9A825;strokeWidth=2;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="predictService" target="step1Clean" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="1. clean" id="rel8Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#F9A825;fontStyle=1" parent="rel8" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="-4" y="34" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel9" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#C62828;strokeWidth=2;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="step1Clean" target="step2Vectorize">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="2. vectorize" id="rel9Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#C62828;fontStyle=1" connectable="0" vertex="1" parent="rel9">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="-1" y="-3" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel10" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=2;endArrow=block;endFill=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="step2Vectorize" target="step3Filter" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1040" y="715"/>
                            <mxPoint x="1040" y="670"/>
                            <mxPoint x="870" y="670"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object label="3. filter" id="rel10Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#0277BD;fontStyle=1" parent="rel10" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="-55" y="-1" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel11" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#C62828;strokeWidth=1;dashed=1;dashPattern=3 3;endArrow=open;endFill=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="step2Vectorize" target="sentenceTransformer" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <object label="uses" id="rel11Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#C62828;" parent="rel11" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel12" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=1;dashed=1;dashPattern=3 3;endArrow=open;endFill=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="step3Filter" target="cosineSimilarity" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1060" y="880"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object label="uses" id="rel12Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#0277BD;" parent="rel12" vertex="1" connectable="0">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="rel14" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=2;dashed=1;dashPattern=2 2;endArrow=open;endFill=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="step3Filter" target="embeddedDataframe">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="830" y="1070"/>
                            <mxPoint x="885" y="1070"/>
                        </Array>
                        <mxPoint x="830" y="1015" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <object label="pickle file" id="rel14Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#F57F17;" connectable="0" vertex="1" parent="rel14">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="-1" y="26" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="qFTdj3-RihENj6gDmTq1-2" value="&lt;span style=&quot;color: rgb(2, 119, 189); font-size: 9px;&quot;&gt;reads&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel14">
                    <mxGeometry x="-0.4105" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel15" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=2;dashed=1;dashPattern=2 2;endArrow=open;endFill=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="step3Filter" target="metadataCsv">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="910" y="1015" as="sourcePoint"/>
                        <Array as="points">
                            <mxPoint x="910" y="1070"/>
                            <mxPoint x="1175" y="1070"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object label="CSV file" id="rel15Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#F57F17;" connectable="0" vertex="1" parent="rel15">
                        <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
                            <mxPoint x="-8" y="-59" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <mxCell id="qFTdj3-RihENj6gDmTq1-3" value="&lt;span style=&quot;color: rgb(2, 119, 189); font-size: 9px;&quot;&gt;reads&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel15">
                    <mxGeometry x="-0.7737" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <object label="&lt;b&gt;Legend&lt;/b&gt;" id="legendTitle">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="40" y="1119" width="120" height="30" as="geometry"/>
                    </mxCell>
                </object>
                <object label="Class/Service" id="legendClass">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;fontSize=10;align=center;" parent="1" vertex="1">
                        <mxGeometry x="40" y="1159" width="100" height="30" as="geometry"/>
                    </mxCell>
                </object>
                <object label="Interface" id="legendInterface">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=10;align=center;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="160" y="1159" width="100" height="30" as="geometry"/>
                    </mxCell>
                </object>
                <object label="DTO/Model" id="legendDto">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontSize=10;align=center;" parent="1" vertex="1">
                        <mxGeometry x="280" y="1159" width="100" height="30" as="geometry"/>
                    </mxCell>
                </object>
                <object label="External Library" id="legendLib">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;fontSize=10;align=center;" parent="1" vertex="1">
                        <mxGeometry x="400" y="1159" width="100" height="30" as="geometry"/>
                    </mxCell>
                </object>
                <object label="Data File" id="legendFile">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#F57F17;fontSize=10;align=center;" parent="1" vertex="1">
                        <mxGeometry x="520" y="1159" width="100" height="30" as="geometry"/>
                    </mxCell>
                </object>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="ModuleCRUDDiagram" name="Modules">
        <mxGraphModel dx="1598" dy="1001" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="1010" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <object label="&lt;b&gt;C4 Level 4: Code Diagram - Module Management Component&lt;/b&gt;&lt;br&gt;Shows CRUD operations for course modules" id="m_title">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="30" y="20" width="800" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Presentation Layer&lt;/b&gt;" id="m_presentation">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="120" width="480" height="230" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="ModulesController" label="&lt;b&gt;«controller»&lt;/b&gt;&lt;br&gt;&lt;b&gt;ModulesController&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- moduleService: IModuleService&lt;br&gt;─────────────&lt;br&gt;+ getModules(&lt;br&gt;&amp;nbsp;&amp;nbsp;session: SessionData&lt;br&gt;): Promise&amp;lt;{modules: Module[]}&amp;gt;&lt;br&gt;+ getModuleById(&lt;br&gt;&amp;nbsp;&amp;nbsp;id: number&lt;br&gt;): Promise&amp;lt;{module: moduleDetail}&amp;gt;&lt;br&gt;+ createModule(&lt;br&gt;&amp;nbsp;&amp;nbsp;dto: CreateModuleDTO&lt;br&gt;): Promise&amp;lt;{module: moduleDetail}&amp;gt;" id="m_controller">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="70" y="150" width="220" height="190" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="CreateModuleDTO" label="&lt;b&gt;«dto»&lt;/b&gt;&lt;br&gt;&lt;b&gt;CreateModuleDTO&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ name: string&lt;br&gt;+ description: string&lt;br&gt;+ content: string&lt;br&gt;+ level: string&lt;br&gt;+ studyCredits: number&lt;br&gt;+ location: Location[]&lt;br&gt;+ moduleTags: ModuleTag[]" id="m_dto">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="310" y="150" width="200" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Application Layer&lt;/b&gt;" id="m_application">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="370" width="480" height="260" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="ModuleService" label="&lt;b&gt;«service»&lt;/b&gt;&lt;br&gt;&lt;b&gt;ModuleService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- moduleRepository: IModuleRepository&lt;br&gt;─────────────&lt;br&gt;+ getAllModules(): Promise&amp;lt;Module[]&amp;gt;&lt;br&gt;+ findById(&lt;br&gt;&amp;nbsp;&amp;nbsp;id: number&lt;br&gt;): Promise&amp;lt;moduleDetail&amp;gt;&lt;br&gt;+ createModule(&lt;br&gt;&amp;nbsp;&amp;nbsp;module: createModule&lt;br&gt;): Promise&amp;lt;moduleDetail&amp;gt;" id="m_service">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="70" y="400" width="200" height="170" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="IModuleService" label="&lt;b&gt;«interface»&lt;/b&gt;&lt;br&gt;&lt;b&gt;IModuleService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ getAllModules()&lt;br&gt;+ findById(id: number)&lt;br&gt;+ createModule(module)" id="m_iservice">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="310" y="400" width="200" height="90" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="Module / moduleDetail" label="&lt;b&gt;«domain model»&lt;/b&gt;&lt;br&gt;&lt;b&gt;Module / moduleDetail&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;id, name, description&lt;br&gt;studyCredits, level&lt;br&gt;location[], moduleTags[]&lt;br&gt;learningOutcomes&lt;br&gt;availableSpots, startDate" id="m_model">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="310" y="510" width="200" height="110" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Infrastructure Layer&lt;/b&gt;" id="m_infrastructure">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="652" width="480" height="280" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="ModuleRepository" label="&lt;b&gt;«repository»&lt;/b&gt;&lt;br&gt;&lt;b&gt;ModuleRepository&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- prisma: PrismaService&lt;br&gt;─────────────&lt;br&gt;+ getAllModules()&lt;br&gt;  - choiceModule.findMany()&lt;br&gt;  - include: location, moduleTags&lt;br&gt;+ findById(id: number)&lt;br&gt;  - choiceModule.findUnique()&lt;br&gt;+ createModule(module)&lt;br&gt;  - $transaction(&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;create base,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;link locations,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;link tags&lt;br&gt;&amp;nbsp;&amp;nbsp;)" id="m_repository">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="70" y="682" width="200" height="198" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="IModuleRepository" label="&lt;b&gt;«interface»&lt;/b&gt;&lt;br&gt;&lt;b&gt;IModuleRepository&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ getAllModules()&lt;br&gt;+ findById(id: number)&lt;br&gt;+ createModule(module)" id="m_irepository">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="310" y="682" width="200" height="90" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PrismaService" label="&lt;b&gt;«ORM client»&lt;/b&gt;&lt;br&gt;&lt;b&gt;PrismaService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Type-safe database client&lt;br&gt;─────────────&lt;br&gt;• choiceModule.findMany()&lt;br&gt;• choiceModule.findUnique()&lt;br&gt;• choiceModule.create()&lt;br&gt;• $transaction()&lt;br&gt;• Relations: location, moduleTags" id="m_prisma">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="310" y="792" width="200" height="130" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="MySQL Database" label="&lt;b&gt;«database»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MySQL Database&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Tables:&lt;br&gt;• ChoiceModule&lt;br&gt;• Location&lt;br&gt;• ModuleTags&lt;br&gt;• ChoiceModuleLocation (join)&lt;br&gt;• ChoiceModuleTags (join)" id="m_database">
                    <mxCell style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="570" y="120" width="480" height="180" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Request Flow:&lt;/b&gt;&lt;br&gt;1. HTTP Request → Controller&lt;br&gt;2. Controller validates session&lt;br&gt;3. Controller → Service (business logic)&lt;br&gt;4. Service → Repository (data access)&lt;br&gt;5. Repository → Prisma Client&lt;br&gt;6. Prisma → MySQL Database&lt;br&gt;7. Response flows back up" id="m_flow">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;dashed=1;dashPattern=2 2;" parent="1" vertex="1">
                        <mxGeometry x="570" y="320" width="240" height="130" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Architecture Pattern:&lt;/b&gt;&lt;br&gt;Layered Architecture with&lt;br&gt;Dependency Injection&lt;br&gt;&lt;br&gt;• Controllers don&#39;t know about DB&lt;br&gt;• Services orchestrate logic&lt;br&gt;• Repositories isolate data access&lt;br&gt;• Interfaces enable testing" id="m_pattern">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="830" y="320" width="220" height="130" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;CRUD Operations:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• GET /modules&lt;br&gt;&amp;nbsp;&amp;nbsp;→ getAllModules()&lt;br&gt;&lt;br&gt;• GET /modules/:id&lt;br&gt;&amp;nbsp;&amp;nbsp;→ findById()&lt;br&gt;&lt;br&gt;• POST /modules&lt;br&gt;&amp;nbsp;&amp;nbsp;→ createModule()&lt;br&gt;&amp;nbsp;&amp;nbsp;(uses DB transaction)" id="m_operations">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="570" y="470" width="240" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="m_rel1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m_controller" target="m_service" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="m_rel2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=block;endFill=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m_service" target="m_iservice" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="m_rel3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m_service" target="m_repository" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="m_rel4" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=block;endFill=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m_repository" target="m_irepository" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="m_rel5" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=2;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m_repository" target="m_prisma" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="m_rel6" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=3;endArrow=block;endFill=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="m_prisma" target="m_database" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="550" y="890"/>
                            <mxPoint x="550" y="210"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object label="SQL queries" id="m_rel6Label">
                    <mxCell style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#F57F17;fontStyle=1" parent="m_rel6" vertex="1" connectable="0">
                        <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                            <mxPoint x="22" y="124" as="offset"/>
                        </mxGeometry>
                    </mxCell>
                </object>
                <object c4Name="Backend API (NestJS)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;Backend API (NestJS)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="eCqWyWoVKJm6mA6zaNQE-1">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1">
                        <mxGeometry x="40" y="100" width="1030" height="890" as="geometry"/>
                    </mxCell>
                </object>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="AuthDiagram" name="Authentication">
        <mxGraphModel dx="1598" dy="1001" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="900" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <object label="&lt;b&gt;C4 Level 4: Code Diagram - Authentication Component&lt;/b&gt;&lt;br&gt;Shows login/logout with password hashing" id="a_title">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="30" y="20" width="800" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Presentation Layer&lt;/b&gt;" id="a_presentation">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="90" width="380" height="240" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="AuthController" label="&lt;b&gt;«controller»&lt;/b&gt;&lt;br&gt;&lt;b&gt;AuthController&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- authService: IAuthService&lt;br&gt;─────────────&lt;br&gt;+ login(&lt;br&gt;&amp;nbsp;&amp;nbsp;dto: LoginDto,&lt;br&gt;&amp;nbsp;&amp;nbsp;session: SessionData&lt;br&gt;): Promise&amp;lt;{user: UserDTO}&amp;gt;&lt;br&gt;+ logout(&lt;br&gt;&amp;nbsp;&amp;nbsp;session: SessionData&lt;br&gt;): Promise&amp;lt;void&amp;gt;" id="a_controller">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="120" width="180" height="170" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="LoginDto" label="&lt;b&gt;«dto»&lt;/b&gt;&lt;br&gt;&lt;b&gt;LoginDto&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ email: string&lt;br&gt;+ password: string" id="a_dto">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="250" y="120" width="140" height="80" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserDTO" label="&lt;b&gt;«dto»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserDTO&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ id: string&lt;br&gt;+ name: string&lt;br&gt;+ email: string&lt;br&gt;+ role: string" id="a_userdto">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="250" y="216" width="140" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Application Layer&lt;/b&gt;" id="a_application">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="346" width="380" height="214" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="AuthService" label="&lt;b&gt;«service»&lt;/b&gt;&lt;br&gt;&lt;b&gt;AuthService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- userRepository: IUserRepository&lt;br&gt;- opts: Argon2Options&lt;br&gt;─────────────&lt;br&gt;+ login(&lt;br&gt;&amp;nbsp;&amp;nbsp;email: string,&lt;br&gt;&amp;nbsp;&amp;nbsp;password: string&lt;br&gt;): Promise&amp;lt;Result&amp;lt;{user}&amp;gt;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;- Find user by email&lt;br&gt;&amp;nbsp;&amp;nbsp;- Verify password with Argon2&lt;br&gt;+ logout(): Result&amp;lt;void&amp;gt;" id="a_service">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="376" width="180" height="164" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="@node-rs/argon2" label="&lt;b&gt;«library»&lt;/b&gt;&lt;br&gt;&lt;b&gt;@node-rs/argon2&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Password hashing&lt;br&gt;─────────────&lt;br&gt;+ verify(&lt;br&gt;&amp;nbsp;&amp;nbsp;hash: string,&lt;br&gt;&amp;nbsp;&amp;nbsp;password: string&lt;br&gt;): Promise&amp;lt;boolean&amp;gt;" id="a_argon2">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="250" y="396" width="140" height="124" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Infrastructure Layer&lt;/b&gt;" id="a_infrastructure">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="594" width="380" height="186" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserRepository" label="&lt;b&gt;«repository»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserRepository&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- prisma: PrismaService&lt;br&gt;─────────────&lt;br&gt;+ findById(&lt;br&gt;&amp;nbsp;&amp;nbsp;id: string&lt;br&gt;): Promise&amp;lt;Result&amp;lt;User&amp;gt;&amp;gt;&lt;br&gt;+ findByEmail(&lt;br&gt;&amp;nbsp;&amp;nbsp;email: string&lt;br&gt;): Promise&amp;lt;Result&amp;lt;User&amp;gt;&amp;gt;" id="a_repository">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="624" width="180" height="146" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PrismaService" label="&lt;b&gt;«ORM»&lt;/b&gt;&lt;br&gt;&lt;b&gt;PrismaService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ user.findUnique()&lt;br&gt;+ user.findMany()" id="a_prisma">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="250" y="661" width="140" height="70" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="MySQL - User Table" label="&lt;b&gt;«database»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MySQL - User Table&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Columns:&lt;br&gt;• id (PK)&lt;br&gt;• name&lt;br&gt;• email (unique)&lt;br&gt;• hashedPassword&lt;br&gt;• role&lt;br&gt;• createdAt&lt;br&gt;• updatedAt" id="a_database">
                    <mxCell style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="450" y="90" width="420" height="180" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Session Management&lt;/b&gt;&lt;br&gt;&lt;br&gt;express-session middleware&lt;br&gt;&lt;br&gt;On successful login:&lt;br&gt;• session.user = userData&lt;br&gt;• session.lastActivity = Date.now()&lt;br&gt;&lt;br&gt;On logout:&lt;br&gt;• session.destroy()" id="a_session">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="450" y="290" width="200" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Security Features:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Argon2 password hashing&lt;br&gt;  (memory-hard algorithm)&lt;br&gt;&lt;br&gt;• Timing-safe comparison&lt;br&gt;&lt;br&gt;• Generic error messages&lt;br&gt;  (prevents user enumeration)&lt;br&gt;&lt;br&gt;• Session-based auth&lt;br&gt;  (30min inactivity timeout)" id="a_security">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="670" y="290" width="200" height="150" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Result Pattern:&lt;/b&gt;&lt;br&gt;&lt;br&gt;All methods return Result&amp;lt;T&amp;gt;&lt;br&gt;&lt;br&gt;• Success: { _tag: &#39;Success&#39;, data: T }&lt;br&gt;• Failure: { _tag: &#39;Failure&#39;, error }&lt;br&gt;&lt;br&gt;Benefits:&lt;br&gt;• Explicit error handling&lt;br&gt;• Type-safe errors&lt;br&gt;• No exceptions" id="a_result">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="450" y="450" width="200" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Login Flow:&lt;/b&gt;&lt;br&gt;1. POST /auth/login&lt;br&gt;2. Validate DTO&lt;br&gt;3. Check existing session&lt;br&gt;4. Find user by email&lt;br&gt;5. Verify password hash&lt;br&gt;6. Create session&lt;br&gt;7. Return user data" id="a_flow">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;dashed=1;dashPattern=2 2;" parent="1" vertex="1">
                        <mxGeometry x="670" y="458" width="200" height="110" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="a_rel1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="a_controller" target="a_service" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="a_rel2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="a_service" target="a_repository" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="a_rel3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#C62828;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="a_service" target="a_argon2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="a_rel4" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="a_repository" target="a_prisma" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="a_rel5" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=3;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="a_prisma" target="a_database" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="430" y="696"/>
                            <mxPoint x="430" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object c4Name="Backend API (NestJS)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;AI Service (Python FastAPI)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="Pr35BjOO6FHeyWbDTKXV-1">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1">
                        <mxGeometry x="20" y="80" width="870" height="770" as="geometry"/>
                    </mxCell>
                </object>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="FavoritesDiagram" name="User Favorites">
        <mxGraphModel dx="1598" dy="1001" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="800" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <object label="&lt;b&gt;C4 Level 4: Code Diagram - User Favorites Component&lt;/b&gt;&lt;br&gt;Shows favorite module management for users" id="f_title">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="30" y="20" width="800" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Presentation Layer&lt;/b&gt;" id="f_presentation">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="90" width="350" height="170" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserFavoritesController" label="&lt;b&gt;«controller»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserFavoritesController&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- favoritesService&lt;br&gt;─────────────&lt;br&gt;+ findFavorites(session)&lt;br&gt;+ isModuleFavorited(moduleId, session)&lt;br&gt;+ addFavorite(moduleId, session)&lt;br&gt;+ removeFavorite(moduleId, session)" id="f_controller">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="120" width="310" height="120" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Application Layer&lt;/b&gt;" id="f_application">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="281" width="350" height="169" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserFavoritesService" label="&lt;b&gt;«service»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserFavoritesService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- favoritesRepository&lt;br&gt;─────────────&lt;br&gt;+ findFavorites(userId)&lt;br&gt;+ isModuleFavorited(userId, moduleId)&lt;br&gt;+ favoriteModule(userId, moduleId)&lt;br&gt;+ unfavoriteModule(userId, moduleId)" id="f_service">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="311" width="310" height="119" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Infrastructure Layer&lt;/b&gt;" id="f_infrastructure">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="474" width="350" height="206" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserFavoritesRepository" label="&lt;b&gt;«repository»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserFavoritesRepository&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- prisma: PrismaService&lt;br&gt;─────────────&lt;br&gt;+ findByUserId(userId)&lt;br&gt;&amp;nbsp;&amp;nbsp;- userFavorites.findMany()&lt;br&gt;+ exists(userId, moduleId)&lt;br&gt;&amp;nbsp;&amp;nbsp;- userFavorites.findFirst()&lt;br&gt;+ add(userId, moduleId)&lt;br&gt;&amp;nbsp;&amp;nbsp;- userFavorites.create()&lt;br&gt;+ remove(userId, moduleId)&lt;br&gt;&amp;nbsp;&amp;nbsp;- userFavorites.deleteMany()" id="f_repository">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="504" width="180" height="166" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PrismaService" label="&lt;b&gt;«ORM»&lt;/b&gt;&lt;br&gt;&lt;b&gt;PrismaService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;userFavorites table:&lt;br&gt;• findMany()&lt;br&gt;• findFirst()&lt;br&gt;• create()&lt;br&gt;• deleteMany()" id="f_prisma">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="250" y="534" width="110" height="106" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="MySQL - UserFavorites" label="&lt;b&gt;«database»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MySQL - UserFavorites&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Join table:&lt;br&gt;&lt;br&gt;• id (PK)&lt;br&gt;• userId (FK → User)&lt;br&gt;• choiceModuleId (FK → Module)&lt;br&gt;• createdAt&lt;br&gt;&lt;br&gt;Unique constraint:&lt;br&gt;(userId, choiceModuleId)" id="f_database">
                    <mxCell style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="420" y="90" width="450" height="200" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;REST API Endpoints:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• GET /user/favorites&lt;br&gt;&amp;nbsp;&amp;nbsp;→ List all favorites&lt;br&gt;&lt;br&gt;• GET /user/favorites/:moduleId&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Check if favorited&lt;br&gt;&lt;br&gt;• POST /user/favorites/:moduleId&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Add to favorites&lt;br&gt;&lt;br&gt;• DELETE /user/favorites/:moduleId&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Remove from favorites" id="f_endpoints">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="420" y="310" width="210" height="160" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Design Pattern:&lt;/b&gt;&lt;br&gt;&lt;br&gt;Simple CRUD with:&lt;br&gt;• Session-based auth&lt;br&gt;• User ID from session&lt;br&gt;• Idempotent operations&lt;br&gt;&lt;br&gt;Benefits:&lt;br&gt;• favoriteModule() checks&lt;br&gt;&amp;nbsp;&amp;nbsp;if exists before adding&lt;br&gt;• No duplicate entries&lt;br&gt;• Clean separation of&lt;br&gt;&amp;nbsp;&amp;nbsp;concerns" id="f_pattern">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="660" y="310" width="210" height="160" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Data Flow Example:&lt;/b&gt;&lt;br&gt;&lt;br&gt;User favorites module 123:&lt;br&gt;&lt;br&gt;1. POST /user/favorites/123&lt;br&gt;2. Extract userId from session&lt;br&gt;3. Check if already exists&lt;br&gt;4. If not, create record&lt;br&gt;5. Return success&lt;br&gt;&lt;br&gt;Database insert:&lt;br&gt;{ userId: &#39;abc&#39;, choiceModuleId: 123 }" id="f_flow">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;dashed=1;dashPattern=2 2;" parent="1" vertex="1">
                        <mxGeometry x="420" y="480" width="450" height="150" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="f_rel1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="f_controller" target="f_service" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="f_rel2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="f_service" target="f_repository" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="f_rel3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="f_repository" target="f_prisma" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="f_rel4" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=3;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="f_prisma" target="f_database" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="360" y="590"/>
                            <mxPoint x="400" y="590"/>
                            <mxPoint x="400" y="190"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object c4Name="Backend API (NestJS)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;AI Service (Python FastAPI)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="FZAayYPcLvp0pgJ6CV_1-1">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1">
                        <mxGeometry x="20" y="80" width="870" height="670" as="geometry"/>
                    </mxCell>
                </object>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="iR5r66ck-HAkH4RhPnUY" name="User">
        <mxGraphModel dx="1598" dy="1001" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="700" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <object label="&lt;b&gt;C4 Level 4: Code Diagram - User Profile Component&lt;/b&gt;&lt;br&gt;Shows user profile retrieval from session" id="xSCURjYpH5viZgwLBO_0-1">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="30" y="20" width="800" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Presentation Layer&lt;/b&gt;" id="xSCURjYpH5viZgwLBO_0-2">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="90" width="350" height="180" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserController" label="&lt;b&gt;«controller»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserController&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- userService: IUserService&lt;br&gt;─────────────&lt;br&gt;+ getProfile(&lt;br&gt;&amp;nbsp;&amp;nbsp;session: SessionData&lt;br&gt;): Promise&amp;lt;{user: UserDTO}&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;- Refreshes user data&lt;br&gt;&amp;nbsp;&amp;nbsp;- Updates session&lt;br&gt;&amp;nbsp;&amp;nbsp;- Returns DTO" id="xSCURjYpH5viZgwLBO_0-3">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="120" width="150" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserDTO" label="&lt;b&gt;«dto»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserDTO&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ id: string&lt;br&gt;+ name: string&lt;br&gt;+ email: string&lt;br&gt;+ role: string&lt;br&gt;+ createdAt: Date" id="xSCURjYpH5viZgwLBO_0-4">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="220" y="120" width="140" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Application Layer&lt;/b&gt;" id="xSCURjYpH5viZgwLBO_0-5">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="289" width="350" height="151" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserService" label="&lt;b&gt;«service»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- userRepository: IUserRepository&lt;br&gt;─────────────&lt;br&gt;+ findById(&lt;br&gt;&amp;nbsp;&amp;nbsp;id: string&lt;br&gt;): Promise&amp;lt;Result&amp;lt;User&amp;gt;&amp;gt;" id="xSCURjYpH5viZgwLBO_0-6">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="319" width="150" height="111" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="IUserService" label="&lt;b&gt;«interface»&lt;/b&gt;&lt;br&gt;&lt;b&gt;IUserService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ findById(id: string)" id="xSCURjYpH5viZgwLBO_0-7">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="230" y="344.5" width="140" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Infrastructure Layer&lt;/b&gt;" id="xSCURjYpH5viZgwLBO_0-8">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="467" width="350" height="160" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="UserRepository" label="&lt;b&gt;«repository»&lt;/b&gt;&lt;br&gt;&lt;b&gt;UserRepository&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- prisma: PrismaService&lt;br&gt;─────────────&lt;br&gt;+ findById(id: string)&lt;br&gt;&amp;nbsp;&amp;nbsp;- user.findUnique()&lt;br&gt;&amp;nbsp;&amp;nbsp;- Returns Result&amp;lt;User&amp;gt;" id="xSCURjYpH5viZgwLBO_0-9">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="497" width="150" height="110" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PrismaService" label="&lt;b&gt;«ORM»&lt;/b&gt;&lt;br&gt;&lt;b&gt;PrismaService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ user.findUnique()" id="xSCURjYpH5viZgwLBO_0-10">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="220" y="523" width="140" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="MySQL - User" label="&lt;b&gt;«database»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MySQL - User&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Table: User&lt;br&gt;&lt;br&gt;• id (PK)&lt;br&gt;• name&lt;br&gt;• email (unique)&lt;br&gt;• hashedPassword&lt;br&gt;• role (STUDENT/TEACHER/ADMIN)&lt;br&gt;• createdAt&lt;br&gt;• updatedAt" id="xSCURjYpH5viZgwLBO_0-11">
                    <mxCell style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="410" y="90" width="460" height="190" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;API Endpoint:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• GET /user/profile&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Requires authentication&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Gets user from session&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Fetches fresh data from DB&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Updates session.user&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Returns UserDTO" id="xSCURjYpH5viZgwLBO_0-12">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="410" y="306" width="220" height="110" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Profile Refresh Pattern:&lt;/b&gt;&lt;br&gt;&lt;br&gt;1. Extract user.id from session&lt;br&gt;2. Query DB for latest data&lt;br&gt;3. Update session with fresh data&lt;br&gt;4. Return sanitized DTO&lt;br&gt;&lt;br&gt;Benefits:&lt;br&gt;• Always returns current data&lt;br&gt;• Syncs session with DB&lt;br&gt;• Excludes password hash" id="xSCURjYpH5viZgwLBO_0-13">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="650" y="294" width="220" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Security Notes:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Password never returned&lt;br&gt;• Session required for access&lt;br&gt;• User can only see own profile&lt;br&gt;• DTO strips sensitive fields&lt;br&gt;&lt;br&gt;Result Pattern ensures:&lt;br&gt;• Type-safe error handling&lt;br&gt;• Clear success/failure states" id="xSCURjYpH5viZgwLBO_0-14">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="410" y="447" width="460" height="130" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="xSCURjYpH5viZgwLBO_0-15" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="xSCURjYpH5viZgwLBO_0-3" target="xSCURjYpH5viZgwLBO_0-6" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="xSCURjYpH5viZgwLBO_0-16" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=block;endFill=0;" parent="1" source="xSCURjYpH5viZgwLBO_0-6" target="xSCURjYpH5viZgwLBO_0-7" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="xSCURjYpH5viZgwLBO_0-17" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="xSCURjYpH5viZgwLBO_0-6" target="xSCURjYpH5viZgwLBO_0-9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="xSCURjYpH5viZgwLBO_0-18" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="xSCURjYpH5viZgwLBO_0-9" target="xSCURjYpH5viZgwLBO_0-10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="xSCURjYpH5viZgwLBO_0-19" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=3;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="xSCURjYpH5viZgwLBO_0-10" target="xSCURjYpH5viZgwLBO_0-11" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="400" y="553"/>
                            <mxPoint x="400" y="180"/>
                            <mxPoint x="410" y="180"/>
                        </Array>
                        <mxPoint x="390" y="210" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <object c4Name="Backend API (NestJS)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;AI Service (Python FastAPI)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="DBQOKAYZh3uuT5mWu-DX-1">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1">
                        <mxGeometry x="20" y="80" width="870" height="600" as="geometry"/>
                    </mxCell>
                </object>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="6IlF_Ji45JD6XivYxtzT" name="Moduletags">
        <mxGraphModel dx="1598" dy="1001" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000" pageHeight="800" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <object label="&lt;b&gt;C4 Level 4: Code Diagram - Module Tags Component&lt;/b&gt;&lt;br&gt;Shows tag management for categorizing modules" id="Xa66Ncatd_Smg4KZIu3O-1">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="30" y="20" width="800" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Presentation Layer&lt;/b&gt;" id="Xa66Ncatd_Smg4KZIu3O-2">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="90" width="400" height="180" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="ModuleTagController" label="&lt;b&gt;«controller»&lt;/b&gt;&lt;br&gt;&lt;b&gt;ModuleTagController&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- moduleTagService: IModuleTagService&lt;br&gt;─────────────&lt;br&gt;+ getAllModuleTags(): Promise&amp;lt;ModuleTag[]&amp;gt;&lt;br&gt;+ createModuleTag(&lt;br&gt;&amp;nbsp;&amp;nbsp;tag: string,&lt;br&gt;&amp;nbsp;&amp;nbsp;session: SessionData&lt;br&gt;): Promise&amp;lt;ModuleTag&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;- Requires ADMIN/TEACHER role" id="Xa66Ncatd_Smg4KZIu3O-3">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="120" width="360" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Application Layer&lt;/b&gt;" id="Xa66Ncatd_Smg4KZIu3O-4">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="300" width="400" height="170" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="ModuleTagService" label="&lt;b&gt;«service»&lt;/b&gt;&lt;br&gt;&lt;b&gt;ModuleTagService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- moduleTagRepository&lt;br&gt;─────────────&lt;br&gt;+ getAllModuleTags(): Promise&amp;lt;ModuleTag[]&amp;gt;&lt;br&gt;+ createModuleTag(&lt;br&gt;&amp;nbsp;&amp;nbsp;name: string&lt;br&gt;): Promise&amp;lt;ModuleTag&amp;gt;" id="Xa66Ncatd_Smg4KZIu3O-5">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="330" width="170" height="130" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="IModuleTagService" label="&lt;b&gt;«interface»&lt;/b&gt;&lt;br&gt;&lt;b&gt;IModuleTagService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ getAllModuleTags()&lt;br&gt;+ createModuleTag(name)" id="Xa66Ncatd_Smg4KZIu3O-6">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="240" y="330" width="170" height="70" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Infrastructure Layer&lt;/b&gt;" id="Xa66Ncatd_Smg4KZIu3O-7">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="503" width="400" height="207" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="ModuleTagRepository" label="&lt;b&gt;«repository»&lt;/b&gt;&lt;br&gt;&lt;b&gt;ModuleTagRepository&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- prisma: PrismaService&lt;br&gt;─────────────&lt;br&gt;+ getAllModuleTags()&lt;br&gt;&amp;nbsp;&amp;nbsp;- moduleTags.findMany()&lt;br&gt;&amp;nbsp;&amp;nbsp;- orderBy: { tag: &#39;asc&#39; }&lt;br&gt;&lt;br&gt;+ createModuleTag(name)&lt;br&gt;&amp;nbsp;&amp;nbsp;- moduleTags.create()&lt;br&gt;&amp;nbsp;&amp;nbsp;- data: { tag: name }" id="Xa66Ncatd_Smg4KZIu3O-8">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="533" width="170" height="157" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PrismaService" label="&lt;b&gt;«ORM»&lt;/b&gt;&lt;br&gt;&lt;b&gt;PrismaService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ moduleTags.findMany()&lt;br&gt;+ moduleTags.create()" id="Xa66Ncatd_Smg4KZIu3O-9">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="250" y="576.5" width="170" height="70" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="MySQL - ModuleTags" label="&lt;b&gt;«database»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MySQL - ModuleTags&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Table: ModuleTags&lt;br&gt;&lt;br&gt;• id (PK)&lt;br&gt;• tag (unique)&lt;br&gt;• createdAt&lt;br&gt;&lt;br&gt;Join: ChoiceModuleTags&lt;br&gt;• moduleId (FK)&lt;br&gt;• tagId (FK)" id="Xa66Ncatd_Smg4KZIu3O-10">
                    <mxCell style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="460" y="90" width="510" height="190" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;API Endpoints:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• GET /moduletags&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Returns all tags&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Public access&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Alphabetically sorted&lt;br&gt;&lt;br&gt;• POST /moduletags&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Create new tag&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Requires: ADMIN or TEACHER&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Validates non-empty name" id="Xa66Ncatd_Smg4KZIu3O-11">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="460" y="302" width="250" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Authorization Pattern:&lt;/b&gt;&lt;br&gt;&lt;br&gt;Read: Public (no auth)&lt;br&gt;Create: Role-based&lt;br&gt;&lt;br&gt;Controller checks:&lt;br&gt;1. Session exists&lt;br&gt;2. User role ≠ STUDENT&lt;br&gt;3. Tag name not empty&lt;br&gt;&lt;br&gt;If unauthorized:&lt;br&gt;→ UnauthorizedException" id="Xa66Ncatd_Smg4KZIu3O-12">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="730" y="298" width="240" height="150" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Example Tags:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Programming&lt;br&gt;• Data Science&lt;br&gt;• Business&lt;br&gt;• Design&lt;br&gt;• Language&lt;br&gt;&lt;br&gt;Used to filter/categorize&lt;br&gt;modules for students" id="Xa66Ncatd_Smg4KZIu3O-13">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;dashed=1;dashPattern=2 2;" parent="1" vertex="1">
                        <mxGeometry x="460" y="465" width="510" height="125" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="Xa66Ncatd_Smg4KZIu3O-14" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Xa66Ncatd_Smg4KZIu3O-3" target="Xa66Ncatd_Smg4KZIu3O-5" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="Xa66Ncatd_Smg4KZIu3O-15" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=block;endFill=0;" parent="1" source="Xa66Ncatd_Smg4KZIu3O-5" target="Xa66Ncatd_Smg4KZIu3O-6" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="Xa66Ncatd_Smg4KZIu3O-16" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Xa66Ncatd_Smg4KZIu3O-5" target="Xa66Ncatd_Smg4KZIu3O-8" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="Xa66Ncatd_Smg4KZIu3O-17" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="Xa66Ncatd_Smg4KZIu3O-8" target="Xa66Ncatd_Smg4KZIu3O-9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="Xa66Ncatd_Smg4KZIu3O-18" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=3;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Xa66Ncatd_Smg4KZIu3O-9" target="Xa66Ncatd_Smg4KZIu3O-10" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="440" y="612"/>
                            <mxPoint x="440" y="180"/>
                            <mxPoint x="460" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object c4Name="Backend API (NestJS)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;AI Service (Python FastAPI)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="txs1CRcEoYQRo1PR6r80-1">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1">
                        <mxGeometry x="20" y="80" width="970" height="700" as="geometry"/>
                    </mxCell>
                </object>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="dCl2iKtWFuQpGzPVvvw_" name="Locations">
        <mxGraphModel dx="1598" dy="1001" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="700" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <object label="&lt;b&gt;C4 Level 4: Code Diagram - Locations Component&lt;/b&gt;&lt;br&gt;Shows location data retrieval for modules" id="rVapk56fZBxy9L9eP0C_-1">
                    <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
                        <mxGeometry x="30" y="20" width="800" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Presentation Layer&lt;/b&gt;" id="rVapk56fZBxy9L9eP0C_-2">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#2E7D32;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="90" width="320" height="140" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="LocationController" label="&lt;b&gt;«controller»&lt;/b&gt;&lt;br&gt;&lt;b&gt;LocationController&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- locationService: ILocationService&lt;br&gt;─────────────&lt;br&gt;+ getAllLocation(): Promise&amp;lt;Location[]&amp;gt;" id="rVapk56fZBxy9L9eP0C_-3">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#4CAF50;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="120" width="280" height="90" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Application Layer&lt;/b&gt;" id="rVapk56fZBxy9L9eP0C_-4">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontColor=#0D47A1;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="255" width="320" height="155" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="LocationService" label="&lt;b&gt;«service»&lt;/b&gt;&lt;br&gt;&lt;b&gt;LocationService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- locationRepository: ILocationRepository&lt;br&gt;─────────────&lt;br&gt;+ getAllLocation(): Promise&amp;lt;Location[]&amp;gt;" id="rVapk56fZBxy9L9eP0C_-5">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="285" width="140" height="115" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="ILocationService" label="&lt;b&gt;«interface»&lt;/b&gt;&lt;br&gt;&lt;b&gt;ILocationService&lt;/b&gt;&lt;br&gt;──────────&lt;br&gt;+ getAllLocation()" id="rVapk56fZBxy9L9eP0C_-6">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontColor=#000000;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;dashed=1;dashPattern=3 3;" parent="1" vertex="1">
                        <mxGeometry x="218" y="305" width="120" height="75" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Infrastructure Layer&lt;/b&gt;" id="rVapk56fZBxy9L9eP0C_-7">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontColor=#BF360C;fontSize=12;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="30" y="443" width="320" height="157" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="LocationRepository" label="&lt;b&gt;«repository»&lt;/b&gt;&lt;br&gt;&lt;b&gt;LocationRepository&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;- prisma: PrismaService&lt;br&gt;─────────────&lt;br&gt;+ getAllLocation()&lt;br&gt;&amp;nbsp;&amp;nbsp;- location.findMany()&lt;br&gt;&amp;nbsp;&amp;nbsp;- orderBy: { name: &#39;asc&#39; }" id="rVapk56fZBxy9L9eP0C_-8">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="50" y="473" width="130" height="117" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="PrismaService" label="&lt;b&gt;«ORM»&lt;/b&gt;&lt;br&gt;&lt;b&gt;PrismaService&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;+ location.findMany()" id="rVapk56fZBxy9L9eP0C_-9">
                    <mxCell style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;arcSize=5;" parent="1" vertex="1">
                        <mxGeometry x="208" y="501.5" width="130" height="60" as="geometry"/>
                    </mxCell>
                </object>
                <object c4Name="MySQL - Location" label="&lt;b&gt;«database»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MySQL - Location&lt;/b&gt;&lt;br&gt;─────────────&lt;br&gt;Table: Location&lt;br&gt;&lt;br&gt;• id (PK)&lt;br&gt;• name (unique)&lt;br&gt;• createdAt" id="rVapk56fZBxy9L9eP0C_-10">
                    <mxCell style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FFFDE7;strokeColor=#F57F17;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="380" y="90" width="490" height="150" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;API Endpoint:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• GET /locations&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Returns all locations&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Ordered alphabetically&lt;br&gt;&amp;nbsp;&amp;nbsp;→ No authentication required&lt;br&gt;&amp;nbsp;&amp;nbsp;→ Public data" id="rVapk56fZBxy9L9eP0C_-11">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="380" y="268" width="240" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Simple Read-Only Pattern:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• No create/update/delete&lt;br&gt;• No authentication&lt;br&gt;• Cached on frontend&lt;br&gt;• Used for:&lt;br&gt;&amp;nbsp;&amp;nbsp;- Module filtering&lt;br&gt;&amp;nbsp;&amp;nbsp;- Location dropdowns&lt;br&gt;&amp;nbsp;&amp;nbsp;- Search filters" id="rVapk56fZBxy9L9eP0C_-12">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" parent="1" vertex="1">
                        <mxGeometry x="640" y="263" width="230" height="120" as="geometry"/>
                    </mxCell>
                </object>
                <object label="&lt;b&gt;Example Locations:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Amsterdam&lt;br&gt;• Haarlem&lt;br&gt;• Online&lt;br&gt;• Rotterdam&lt;br&gt;&lt;br&gt;Used in module.location relation" id="rVapk56fZBxy9L9eP0C_-13">
                    <mxCell style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;fontColor=#000000;fontSize=9;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;dashed=1;dashPattern=2 2;" parent="1" vertex="1">
                        <mxGeometry x="380" y="399" width="490" height="100" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="rVapk56fZBxy9L9eP0C_-14" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="rVapk56fZBxy9L9eP0C_-3" target="rVapk56fZBxy9L9eP0C_-5" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="rVapk56fZBxy9L9eP0C_-15" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;dashPattern=3 3;endArrow=block;endFill=0;" parent="1" source="rVapk56fZBxy9L9eP0C_-5" target="rVapk56fZBxy9L9eP0C_-6" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="rVapk56fZBxy9L9eP0C_-16" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#666666;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="rVapk56fZBxy9L9eP0C_-5" target="rVapk56fZBxy9L9eP0C_-8" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="130" y="437"/>
                            <mxPoint x="115" y="437"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rVapk56fZBxy9L9eP0C_-17" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#0277BD;strokeWidth=2;endArrow=block;endFill=1;" parent="1" source="rVapk56fZBxy9L9eP0C_-8" target="rVapk56fZBxy9L9eP0C_-9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="rVapk56fZBxy9L9eP0C_-18" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeColor=#F57F17;strokeWidth=3;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="rVapk56fZBxy9L9eP0C_-9" target="rVapk56fZBxy9L9eP0C_-10" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="338" y="530"/>
                            <mxPoint x="360" y="530"/>
                            <mxPoint x="360" y="160"/>
                            <mxPoint x="380" y="160"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <object c4Name="Backend API (NestJS)" c4Type="ContainerScopeBoundary" c4Application="Container" label="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left&quot;&gt;AI Service (Python FastAPI)&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left&quot;&gt;[Container]&lt;/div&gt;" id="1z75RKClPjLDaclVjFT5-1">
                    <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#2086C9;fontColor=#2086C9;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1">
                        <mxGeometry x="20" y="80" width="870" height="590" as="geometry"/>
                    </mxCell>
                </object>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>